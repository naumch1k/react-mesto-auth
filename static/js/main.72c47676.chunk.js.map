{"version":3,"sources":["images/header-logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Loader.js","components/Main.js","components/Login.js","components/Register.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","images/success-icon.svg","images/fail-icon.svg","components/InfoTooltip.js","utils/api.js","utils/constants.js","utils/auth.js","components/ProtectedRoute.js","components/PageNotFound.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","loggedIn","userEmail","onSignOut","location","useLocation","className","src","logoPath","alt","pathname","to","onClick","type","CurrentUserContext","React","createContext","Card","card","onCardLike","onCardDelete","currentUser","useContext","isOwned","owner","_id","isLiked","likes","some","item","cardDeleteButtonClassName","cardLikeButtonClassName","link","name","aria-label","length","Loader","Main","props","avatar","onEditAvatar","about","onEditProfile","onAddPlace","isLoading","cards","map","onCardClick","Login","onLogin","useState","email","setEmail","password","setPassword","onSubmit","e","preventDefault","id","placeholder","value","onChange","target","required","Register","onRegistration","Footer","Date","getFullYear","PopupWithForm","isOpen","onClose","title","children","buttonText","EditProfilePopup","setName","description","setDescription","useEffect","onUpdateUser","minLength","maxLength","EditAvatarPopup","avatarRef","useRef","current","onUpdateAvatar","ref","AddPlacePopup","setLink","ImagePopup","InfoTooltip","isSuccess","successIcon","failIcon","api","options","this","_baseUrl","baseUrl","_token","headers","authorization","res","ok","json","Promise","reject","status","fetch","then","_handleResponse","data","method","body","JSON","stringify","cardId","_deleteLike","_setLike","BASE_URL","handleResponse","ProtectedRoute","Component","component","PageNotFound","App","setCurrentUser","setLoggedIn","setUserEmail","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","setIsSuccess","profileSubmitButtonText","setProfileSubmitButtonText","avatarSubmitButtonText","setAvatarSubmitButtonText","cardSubmitButtonText","setCardSubmitButtonText","setCards","selectedCard","setSelectedCard","setIsLoading","history","useHistory","tokenCheck","all","getUserInfo","getCards","userData","cardsData","catch","err","console","log","finally","localStorage","getItem","token","Authorization","auth","push","closeAllPopups","closeByEsc","useCallback","key","document","addEventListener","removeEventListener","Provider","removeItem","exact","path","changeLikeCardStatus","newCard","state","currentCard","deleteCard","filter","setItem","setUserInfo","addNewCard","setUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","process","getElementById"],"mappings":"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","file":"static/js/main.72c47676.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header-logo.5f3664ca.svg\";","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport logoPath from './../images/header-logo.svg';\n\nfunction Header({ loggedIn, userEmail, onSignOut }) {\n  const location = useLocation();\n\n  return (\n    <header className=\"header page__header\">\n      <img className=\"header__logo\" src={logoPath} alt=\"Логотип сервиса Mesto Russia\" />\n      {!loggedIn &&\n        (<nav>\n          {location.pathname === '/sign-in' &&\n            (\n              <Link className=\"header__navlink\" to=\"/sign-up\">\n                Sign up\n              </Link>\n            )\n          }\n          {location.pathname === '/sign-up' &&\n            (\n              <Link className=\"header__navlink\" to=\"/sign-in\">\n                Sign in\n              </Link>\n            )\n          }\n        </nav>)\n      }\n      {loggedIn &&\n        (<div className=\"header__user-info\">\n          <p className=\"header__email\">{userEmail}</p>\n          <button onClick={onSignOut} className=\"header__button\" type=\"button\">\n            Sign out\n          </button>\n        </div>)\n      }\n    </header>\n  )\n}\n\nexport default Header;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import React, { useContext } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card({ card, onClick, onCardLike, onCardDelete }) {\n  const currentUser = useContext(CurrentUserContext);\n\n  const isOwned = card.owner._id === currentUser._id;\n  const isLiked = card.likes.some(item => item._id === currentUser._id);\n\n  const cardDeleteButtonClassName = (\n    `element__delete-btn ${isOwned ? '' : 'element__delete-btn_hidden'}`\n  );\n\n  const cardLikeButtonClassName = (\n    `element__like-btn ${isLiked ? 'element__like-btn_active' : ''}`\n  ); \n\n  const handleClick = () => {\n    onClick(card);\n  }\n\n  const handleLikeClick = () => {\n    onCardLike(card);\n  };\n\n  const handleDeleteClick = () => {\n    onCardDelete(card);\n  };\n\n  return(\n    <li className=\"element\">\n      <img onClick={handleClick} className=\"element__image\" src={card.link} alt={`${card.name}`} />\n      <div className=\"element__desc\">\n        <h3 className=\"element__title\">{card.name}</h3>\n        <div className=\"element__like-container\">\n          <button onClick={handleLikeClick} className={cardLikeButtonClassName} type=\"button\" aria-label=\"Like photo\"></button>\n          <span className=\"element__like-count\">{card.likes.length}</span>\n        </div>\n      </div>\n      <button onClick={handleDeleteClick} className={cardDeleteButtonClassName} type=\"button\" aria-label=\"Delete photo\"></button>\n    </li>\n  );\n\n}\n\nexport default Card; ","import React from 'react';\n\nfunction Loader()  {\n  return (\n    <div className=\"loader\">\n    </div>\n  );\n};\n\nexport default Loader;","import React, { useContext } from 'react';\nimport Card from './Card';\nimport Loader from './Loader';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main(props) {\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content page__content\">\n      <section className=\"profile content__section\">\n        <div className=\"profile__avatar-container\">\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Логотип профиля\" />\n          <button className=\"profile__avatar-btn\" aria-label=\"Обновить аватар\"\n          onClick={props.onEditAvatar}\n          ></button>\n        </div>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <p className=\"profile__bio\">{currentUser.about}</p>\n          <button className=\"profile__edit-btn\" type=\"button\" aria-label=\"Редактировать профиль\"\n          onClick={props.onEditProfile}\n          ></button>\n        </div>\n        <button className=\"profile__add-btn\" type=\"button\" aria-label=\"Добавить фотографию\"\n        onClick={props.onAddPlace}\n        ></button>\n      </section>\n      <section className=\"elements content__section\">\n        {props.isLoading \n          ? <Loader />\n          : <ul className=\"elements__list\">\n            {props.cards.map((card) => (\n              <Card \n                key={card._id}\n                card={card}\n                onClick={props.onCardClick}\n                onCardLike={props.onCardLike}\n                onCardDelete={props.onCardDelete}\n              />\n              ))}          \n            </ul>\n        }\n      </section>\n    </main>\n  )\n}\n\nexport default Main;\n","import React, { useState } from 'react';\n\nfunction Login({ onLogin }) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    onLogin({\n      \"password\": password,\n      \"email\": email,\n    });\n  }\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  }\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  }\n\n  return(\n    <form onSubmit={handleSubmit} className=\"form form_theme_dark\" name=\"login-form\">\n      <h2 className=\"form__heading form__heading_theme_dark\">Sign in to Mesto</h2>\n      <fieldset className=\"form__items form__items_theme_dark\">\n        <input \n          className=\"form__item form__item_theme_dark form__item_el_email\"\n          id=\"email\" \n          type=\"email\" \n          name=\"email\" \n          placeholder=\"Email\"\n          value={email}\n          onChange={handleEmailChange}\n          required \n        />\n        <p className=\"form__error\" id=\"email-error\"></p>\n        <input \n          className=\"form__item form__item_theme_dark form__item_el_password\"\n          id=\"password\" \n          type=\"password\" \n          name=\"password\" \n          placeholder=\"Password\" \n          value={password}\n          onChange={handlePasswordChange}\n          required \n        />\n        <p className=\"form__error\" id=\"password-error\"></p>\n      </fieldset>\n      <button className=\"form__submit-btn form__submit-btn_theme_dark\" type=\"submit\">Sign in</button>\n    </form>\n  );\n}\n\nexport default Login; \n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register({ onRegistration }) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    onRegistration({\n      \"password\": password,\n      \"email\": email,\n    });\n  }\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  }\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  }\n\n  return(\n    <form onSubmit={handleSubmit} className=\"form form_theme_dark\" name=\"signup-form\">\n      <h2 className=\"form__heading form__heading_theme_dark\">Create an account</h2>\n      <fieldset className=\"form__items form__items_theme_dark\">\n        <input \n          className=\"form__item form__item_theme_dark form__item_el_email\"\n          id=\"email\" \n          type=\"email\" \n          name=\"email\" \n          placeholder=\"Email\"\n          value={email}\n          onChange={handleEmailChange}\n          required \n        />\n        <p className=\"form__error\" id=\"email-error\"></p>\n        <input \n          className=\"form__item form__item_theme_dark form__item_el_password\"\n          id=\"password\" \n          type=\"password\" \n          name=\"password\" \n          placeholder=\"Password\" \n          value={password}\n          onChange={handlePasswordChange}\n          required \n        />\n        <p className=\"form__error\" id=\"password-error\"></p>\n      </fieldset>\n      <button className=\"form__submit-btn form__submit-btn_theme_dark\" type=\"submit\">Sign up</button>\n      <p className=\"form__text\">\n        Already have an account?\n        <Link to=\"/sign-in\" className=\"form__link\"> Sign in</Link>\n      </p>\n    </form>\n  );\n}\n\nexport default Register;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer page__footer\">\n      <p className=\"footer__copyright\">&copy; {new Date().getFullYear()} Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","import React from 'react';\n\nfunction PopupWithForm(props) {\n  return (\n    <div className={`popup popup_type_${props.name}  ${props.isOpen && 'popup_opened'}`}>\n      <div className=\"popup__container popup__container_type_form\">\n        <button onClick={props.onClose} className=\"popup__close-btn\" type=\"button\" aria-label=\"Close popup\"></button>\n        <form onSubmit={props.onSubmit} className=\"form\" name={`${props.name}-form`}>\n        <h2 className=\"form__heading\">{props.title}</h2>\n          <fieldset className=\"form__items\">\n            {props.children}\n          </fieldset>\n          <button className=\"form__submit-btn\" type=\"submit\">{props.buttonText}</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default PopupWithForm;\n","import React, { useState, useEffect, useContext } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup(props) {\n  const currentUser = useContext(CurrentUserContext);\n\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, props.isOpen]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n  \n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  } \n\n  const handleNameChange = (e) => {\n    setName(e.target.value);\n  }\n\n  const hanldeDescriptionChange = (e) => {\n    setDescription(e.target.value);\n  }\n\n  return (\n    <PopupWithForm\n      name=\"edit\"\n      title=\"Edit profile\"\n      buttonText={props.buttonText}\n      isOpen={props.isOpen}\n      onSubmit={handleSubmit}\n      onClose={props.onClose}\n    >\n      <input \n        className=\"form__item form__item_el_name\"\n        id=\"profile-name\" \n        type=\"text\" \n        name=\"name\" \n        placeholder=\"Name\" \n        minLength=\"2\" maxLength=\"40\"\n        value={name}\n        onChange={handleNameChange}\n        required \n      />\n      <p className=\"form__error\" id=\"profile-name-error\"></p>\n      <input \n        className=\"form__item form__item_el_bio\"\n        id=\"profile-bio\" \n        type=\"text\" \n        name=\"about\" \n        placeholder=\"About\" \n        minLength=\"2\" maxLength=\"200\" \n        value={description}\n        onChange={hanldeDescriptionChange}\n        required \n      />\n      <p className=\"form__error\" id=\"profile-bio-error\"></p>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;\n","import React, { useEffect, useRef } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n  const avatarRef = useRef();\n\n  useEffect(() => {\n    avatarRef.current.value = '';\n  }, [props.isOpen])\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n  \n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  } \n\n  return (\n    <PopupWithForm\n      name=\"avatar\"\n      title=\"Update Profile Picture\"\n      buttonText={props.buttonText}\n      isOpen={props.isOpen}\n      onSubmit={handleSubmit}\n      onClose={props.onClose}\n    >\n      <input \n        className=\"form__item\"\n        id=\"avatar-url\"\n        type=\"url\"\n        name=\"avatar\"\n        ref={avatarRef}\n        placeholder=\"Link\"\n        required \n      />\n      <p className=\"form__error\" id=\"avatar-url-error\"></p>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n","import React, { useState, useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup(props) {\n  const [name, setName] = useState('');\n  const [link, setLink] = useState('');\n\n  useEffect(() => {\n    setName('');\n    setLink('');\n  }, [props.isOpen])\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    props.onAddPlace({\n      name,\n      link,\n    })\n  }\n\n  const handleNameChange = (e) => {\n    setName(e.target.value);\n  }\n\n  const handleLinkChange = (e) => {\n    setLink(e.target.value);\n  }\n\n  return (\n    <PopupWithForm\n      name=\"add\"\n      title=\"Add Photo\"\n      buttonText={props.buttonText}\n      isOpen={props.isOpen}\n      onSubmit={handleSubmit}\n      onClose={props.onClose}\n    >\n      <input\n        className=\"form__item form__item_el_name\"\n        id=\"item-name\"\n        type=\"text\"\n        name=\"name\"\n        placeholder=\"Description\"\n        minLength=\"2\" maxLength=\"30\"\n        value={name}\n        onChange={handleNameChange}\n        required\n      />\n      <p className=\"form__error\" id=\"item-name-error\"></p>\n      <input\n        className=\"form__item form__item_el_link\"\n        id=\"item-url\"\n        type=\"url\"\n        name=\"link\"\n        placeholder=\"Link\"\n        value={link}\n        onChange={handleLinkChange}\n        required\n      />\n      <p className=\"form__error\" id=\"item-url-error\"></p>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\n\nfunction ImagePopup(props) {\n  return (\n    <div className={`popup popup_type_image ${props.card && 'popup_opened'}`}>\n      <div className=\"popup__container popup__container_type_image\">\n        <button onClick={props.onClose} className=\"popup__close-btn\" type=\"button\" aria-label=\"Close popup\"></button>\n        <figure className=\"popup__figure\">\n          <img className=\"popup__image\" src={`${props.card.link}`} alt={`${props.card.name}`} />\n          <figcaption className=\"popup__image-caption\">{props.card.name}</figcaption>\n        </figure>\n      </div>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","export default __webpack_public_path__ + \"static/media/success-icon.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail-icon.df8eddf6.svg\";","import React from 'react';\n\nimport successIcon from '../images/success-icon.svg'\nimport failIcon from '../images/fail-icon.svg'\n\nfunction InfoTooltip(props) {\n  return (\n    <div className={`popup ${props.isOpen && 'popup_opened'}`}>\n      <div className=\"popup__container popup__container_type_message\">\n        <img\n          className=\"popup__icon\"\n          src={props.isSuccess ? successIcon : failIcon}\n          alt={props.isSuccess ? 'Success icon' : 'Error icon'}\n        />\n        <p className=\"popup__message\">\n          {props.isSuccess ? 'Your account has been created successfully!' : 'Sorry, something went wrong. Please try again.'}\n        </p>\n        <button onClick={props.onClose} className=\"popup__close-btn\" type=\"button\" aria-label=\"Close popup\"></button>\n      </div>\n    </div>\n  )\n}\n\nexport default InfoTooltip;","class Api {\n  \n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._token = options.headers.authorization;\n  }\n\n  _handleResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  getCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._handleResponse)\n  }\n\n  addNewCard(data) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n    .then(this._handleResponse)\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(this._handleResponse)\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then(this._handleResponse)\n  }\n\n  setUserInfo(data) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n    .then(this._handleResponse)\n  }\n\n  setUserAvatar(data) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    })\n    .then(this._handleResponse)\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this._deleteLike(cardId);\n    } else {\n      return this._setLike(cardId);\n    }\n  }\n\n  _deleteLike(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(this._handleResponse)\n  }\n\n  _setLike(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(this._handleResponse)\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-24',\n  headers: {\n    authorization: '2a6d7634-25aa-4e7e-bcf3-8309525480f9',\n    'Content-Type': 'application/json'\n  }\n})\n\nexport default api;\n","export const BASE_URL = 'https://auth.nomoreparties.co';\nexport const ESCAPE_KEY = \"Escape\";\n\nexport const formValidationSettings = {\n  formSelector: '.form',\n  inputSelector: '.form__item',\n  submitButtonSelector: '.form__submit-btn',\n  inactiveButtonClass: 'form__submit-btn_disabled',\n  inputErrorClass: 'form__item_type_error',\n  errorClass: 'form__error_active'\n};\n\nexport const userData = {\n  userNameSelector: '.profile__name',\n  userBioSelector: '.profile__bio',\n  userAvatarSelector: '.profile__avatar'\n}\n\nexport const popupSelectors = {\n  editPopupSelector: \".popup_type_edit\",\n  addPopupSelector: \".popup_type_add\",\n  imagePopupSelector: \".popup_type_image\",\n  confirmPopupSelector: \".popup_type_confirm\",\n  editAvatarPopupSelector: \".popup-type-avatar\"\n}\n\nexport const formSelectors = {\n  editProfileFormSelector: \".edit-form\",\n  addFormSelector: \".add-form\",\n  editAvatarFormSelector: \".avatar-form\"\n}\n\nexport const openPopupButtonSelectors = {\n  openEditPopupButtonSelector: \".profile__edit-btn\",\n  openAddPopupButtonSelector: \".profile__add-btn\",\n  openEditAvatarButtonSelector: \".profile__avatar-btn\"\n}\n\nexport const elementsListSelector = '.elements__list';\nexport const profileSelector = \".profile\";\nexport const editFormInputNameSelector = \".form__item_el_name\";\nexport const editFormInputBioSelector = \".form__item_el_bio\";\n","import { BASE_URL } from './constants';\n\nconst handleResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Error: ${res.status}`);\n}\n\nexport const register = ({password, email}) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\" \n    },\n    body: JSON.stringify({\n      password,\n      email\n    })\n  })\n    .then((res) => handleResponse(res));\n}\n\nexport const authorize = ({password, email}) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\" \n    },\n    body: JSON.stringify({\n      password,\n      email\n    })\n  })\n    .then((res) => handleResponse(res));\n}\n\nexport const checkToken = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  })\n    .then((res) => handleResponse(res));\n}\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","import React from 'react';\n\nfunction PageNotFound () {\n  return (\n    <div className=\"not-found\">\n      <h3 className=\"not-found__title\">\n       <span>404</span> - Page not found\n      </h3>\n      <p className=\"not-found__subtitle\">\n       Ooooops\n      </p>\n    </div>\n  )\n}\n\nexport default PageNotFound;","import React, { useEffect, useState } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport Header from './Header';\nimport Main from './Main';\nimport Login from './Login';\nimport Register from './Register';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport InfoTooltip from './InfoTooltip';\nimport api from '../utils/api';\nimport * as auth from '../utils/auth';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport ProtectedRoute from './ProtectedRoute';\nimport PageNotFound from './PageNotFound';\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState({\n    name: 'Irina',\n    about: 'offline',\n    avatar: '',\n  });\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userEmail, setUserEmail] = useState(\"\");\n  \n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  \n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  \n  const [profileSubmitButtonText, setProfileSubmitButtonText] = useState('Edit');\n  const [avatarSubmitButtonText, setAvatarSubmitButtonText] = useState('Update');\n  const [cardSubmitButtonText, setCardSubmitButtonText] = useState('Post');\n  \n  const [cards, setCards] = useState([]);\n  const [selectedCard, setSelectedCard] = useState(null);\n  \n  const [isLoading, setIsLoading] = useState(false);\n  \n  const history = useHistory();\n\n  useEffect(() => {\n    tokenCheck();\n  }, [])\n\n  useEffect(() => {\n    setIsLoading(true);\n  \n     Promise.all([api.getUserInfo(), api.getCards()])\n      .then(([userData, cardsData]) => {\n        setCurrentUser(userData);\n        setCards(cardsData);\n      })\n      .catch((err) => {\n        console.log(`Couldnt get data from the server. ${err}`);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      }); \n  \n   }, [])\n  \n  const tokenCheck = () => {\n    if (localStorage.getItem('jwt')){\n      const token = localStorage.getItem('jwt');\n      \n      if (token) {\n        auth.checkToken(token)\n          .then((res) => {\n            if (res) {\n              setLoggedIn(true);\n              setUserEmail(res.data.email);\n              history.push('/');\n            }\n          })\n          .catch((err) => {\n            console.log(`Error: ${err}`);\n          })\n      }\n    }\n  }\n  \n  const handleRegistration = (data) => {\n    auth.register(data)\n      .then(() => {\n        setIsSuccess(true);\n        setIsInfoTooltipPopupOpen(true);\n        history.push('/sign-in');\n      })\n      .catch((err) => {\n        setIsSuccess(false);\n        setIsInfoTooltipPopupOpen(true);\n        console.log(`Unable to register. ${err}`);\n      })\n  }\n  \n  const handleLogin = (data) => {\n    auth.authorize(data)\n      .then((res) => {\n        setLoggedIn(true);\n        setUserEmail(data.email);\n        localStorage.setItem('jwt', res.token);\n        history.push('/');\n      })\n      .catch((err) => {\n        setIsSuccess(false);\n        setIsInfoTooltipPopupOpen(true);\n        console.log(`Unable to login. ${err}`);\n      })\n  }\n  \n  const handleSignOut = () => {\n    setLoggedIn(false);\n    localStorage.removeItem('jwt');\n    history.push(\"/sign-in\");\n  }\n  \n  const handleUpdateUser = (data) => {\n    setProfileSubmitButtonText('Saving...');\n  \n     api.setUserInfo(data)\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .then(() => {\n        setEditProfilePopupOpen(false);\n      })\n      .catch((err) => {\n        console.log(`Unable to update user info. ${err}`);\n      })\n      .finally(() => {\n        setProfileSubmitButtonText('Edit');\n      })\n  }\n  \n  const handleAddPlace = (data) => {\n    setCardSubmitButtonText('Uploading...');\n  \n     api.addNewCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n      })\n      .then(() => {\n        setAddPlacePopupOpen(false);\n      })\n      .catch((err) => {\n        console.log(`Unable to publish a card. ${err}`);\n      })\n      .finally(() => {\n        setCardSubmitButtonText('Post');\n      })\n  }\n  \n  const handleUpdateAvatar = (data) => {\n    setAvatarSubmitButtonText('Updading...');\n  \n     api.setUserAvatar(data)\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .then(() => {\n        setEditAvatarPopupOpen(false);\n      })\n      .catch((err) => {\n        console.log(`Unable to update user avatar. ${err}`);\n      })\n      .finally(() => {\n        setAvatarSubmitButtonText('Update');\n      })\n  }\n  \n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some(item => item._id === currentUser._id);\n  \n    api.changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((currentCard) => currentCard._id === card._id ? newCard : currentCard));\n      })\n      .catch((err) => {\n        console.log(`${err}`);\n      })\n  }\n  \n  const handleCardDelete = (card) => {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards(cards.filter((item) => item !== card));\n      })\n      .catch((err) => {\n        console.log(`${err}`);\n      })\n  }\n  \n  function handleEditProfilePopupOpen() {\n    setEditProfilePopupOpen(true);\n  }\n  \n  function handleAddPlacePopupOpen() {\n    setAddPlacePopupOpen(true);\n  }\n  \n  function handleEditAvatarPopupOpen() {\n    setEditAvatarPopupOpen(true);\n  }\n  \n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n  \n  function closeAllPopups() {\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setSelectedCard(null);\n    setIsInfoTooltipPopupOpen(false);\n  }\n\n  const closeByEsc = React.useCallback(e => {\n    if (e.key === 'Escape') {\n      closeAllPopups();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isAddPlacePopupOpen || isEditAvatarPopupOpen || isEditProfilePopupOpen || selectedCard) {\n      document.addEventListener('keydown', closeByEsc)\n    }\n    return () => document.removeEventListener('keydown', closeByEsc)\n  }, [closeByEsc, isAddPlacePopupOpen, isEditProfilePopupOpen, isEditAvatarPopupOpen, selectedCard]);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <div className=\"page__container\">\n          <Header \n            loggedIn={loggedIn}\n            userEmail={userEmail}\n            onSignOut={handleSignOut}\n          />\n          <Switch>\n            <ProtectedRoute\n              exact path=\"/\"\n              loggedIn={loggedIn}\n              component={Main}\n              cards={cards}\n              onEditProfile={handleEditProfilePopupOpen}\n              onAddPlace={handleAddPlacePopupOpen}\n              onEditAvatar={handleEditAvatarPopupOpen}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete}\n              isLoading={isLoading}\n            />\n            <Route path=\"/sign-up\">\n              <Register\n                onRegistration={handleRegistration}\n              />\n            </Route>\n            <Route path=\"/sign-in\">\n              <Login\n                 onLogin={handleLogin}\n              />\n            </Route>\n            <Route path=\"*\">\n              <PageNotFound />\n            </Route>\n          </Switch>\n          { loggedIn && <Footer /> }\n          <EditProfilePopup \n            buttonText={profileSubmitButtonText}\n            isOpen={isEditProfilePopupOpen}\n            onUpdateUser={handleUpdateUser}\n            onClose={closeAllPopups}\n          />\n          <AddPlacePopup\n            buttonText={cardSubmitButtonText}\n            isOpen={isAddPlacePopupOpen}\n            onAddPlace={handleAddPlace}\n            onClose={closeAllPopups}\n          >\n          </AddPlacePopup>\n          <EditAvatarPopup \n            buttonText={avatarSubmitButtonText}\n            isOpen={isEditAvatarPopupOpen}\n            onUpdateAvatar={handleUpdateAvatar}\n            onClose={closeAllPopups}\n          /> \n          <PopupWithForm\n            name=\"confirm\"\n            title=\"Please confirm\"\n            buttonText=\"Yes, delete\"\n          />\n          { selectedCard && \n          <ImagePopup \n            card={selectedCard} \n            onClose={closeAllPopups}\n          />\n          }\n          <InfoTooltip\n            isOpen={isInfoTooltipPopupOpen}\n            isSuccess={isSuccess}\n            onClose={closeAllPopups}\n          />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}